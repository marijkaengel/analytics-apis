(self.webpackChunkanalytics_apis=self.webpackChunkanalytics_apis||[]).push([[1798],{4954:function(e,a,n){"use strict";n.r(a),n.d(a,{_frontmatter:function(){return d},default:function(){return s}});var t=n(2122),r=n(9756),o=(n(5007),n(4983)),i=n(9536),d={},l={_frontmatter:d},p=i.Z;function s(e){var a=e.components,n=(0,r.Z)(e,["components"]);return(0,o.mdx)(p,(0,t.Z)({},l,n,{components:a,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"job-endpoint"},"Job endpoint"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"/job")," endpoint allows you to create a data repair job (using ",(0,o.mdx)("inlineCode",{parentName:"p"},"POST"),") or retrieve a list of currently running jobs (using ",(0,o.mdx)("inlineCode",{parentName:"p"},"GET"),")."),(0,o.mdx)("h2",{id:"create-a-data-repair-job"},"Create a data repair job"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"/job")," endpoint uses the ",(0,o.mdx)("inlineCode",{parentName:"p"},"validationToken")," from the ",(0,o.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint to confirm that its parameters are the same as those passed to ",(0,o.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate"),". If the parameters do not match or the server call volume has changed significantly between the call to ",(0,o.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," and the call to ",(0,o.mdx)("inlineCode",{parentName:"p"},"/job"),", the Data Repair API returns an error."),(0,o.mdx)("p",null,"If the scope of the data repair job changes, re-run the ",(0,o.mdx)("inlineCode",{parentName:"p"},"/serverCallEstimate")," endpoint to generate a new ",(0,o.mdx)("inlineCode",{parentName:"p"},"validationToken"),"."),(0,o.mdx)("p",null,"WARNING: Use of the Data Repair API permanently deletes existing Adobe Analtyics data. Follow the recommended workflow for testing and validation prior to applying any data repair jobs to production data."),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job")),(0,o.mdx)("p",null,"A JSON object containing the variables and actions to take is required in the request body. See ",(0,o.mdx)("a",{parentName:"p",href:"/analytics-apis/d1e2c8b5cd0cde8ad8856e42a97c0fa5/variables.md"},"Job definition and variables")," for information around how to create this JSON object."),(0,o.mdx)("h3",{id:"example-request"},"Example request"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X POST -H "accept: application/json" -H "x-proxy-global-company-id: {ANALYTICS_GLOBAL_COMPANY_ID}" \\\n    -H "Authorization: Bearer {ACCESS_TOKEN}" -H "x-api-key: {API_KEY/CLIENT_ID}" -d \'{REPAIR_JOB_DEFINITION}\' \\\n    "https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job?validationToken={VALIDATION_TOKEN}&dateRangeStart={YYYY-MM-DD}&dateRangeEnd={YYYY-MM-DD}"\n')),(0,o.mdx)("h3",{id:"response"},"Response"),(0,o.mdx)("p",null,"The Data Repair API returns:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"The Server call volume estimate for the data repair job"),(0,o.mdx)("li",{parentName:"ul"},"The job id"),(0,o.mdx)("li",{parentName:"ul"},"The status of a submitted job id"),(0,o.mdx)("li",{parentName:"ul"},"A list of all data repair jobs for a report suite")),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "dateRangeEnd": "2019-03-28",\n    "dateRangeStart": "2019-03-28",\n    "jobCompleteTime": null,\n    "jobCreateTime": "2020-03-24T09:02:59+00:00",\n    "jobDefinition": {\n        "variables": {\n            "activitymap": {\n                "action": "delete"\n            },\n            "prop12": {\n                "action": "delete"\n            },\n            "evar74": {\n                "action": "delete"\n            },\n            "evar107": {\n                "action": "delete"\n            }\n        }\n    },\n    "jobId": 24,\n    "progress": 0,\n    "reportSuiteId": "sample.reportsuite",\n    "serverCalls": null,\n    "status": "processing"\n}\n')),(0,o.mdx)("h2",{id:"view-existing-jobs"},"View existing jobs"),(0,o.mdx)("p",null,"You can also use this endpoint to retrieve all data repair jobs that were created for the given report suite."),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"GET https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job")),(0,o.mdx)("h3",{id:"example-request-1"},"Example request"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X GET -H "accept: application/json" -H "x-proxy-global-company-id: {ANALYTICS_GLOBAL_COMPANY_ID}" \\\n    -H "Authorization: Bearer {ACCESS_TOKEN}" -H "x-api-key: {API_KEY/CLIENT_ID}" \\\n    "https://analytics.adobe.io/api/{ANALYTICS_GLOBAL_COMPANY_ID}/datarepair/v1/{REPORT_SUITE_ID}/job"\n')),(0,o.mdx)("h3",{id:"response-1"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "dateRangeEnd": "2019-03-28",\n        "dateRangeStart": "2019-03-28",\n        "jobCompleteTime": "2020-03-24T10:13:51+00:00",\n        "jobCreateTime": "2020-03-24T09:02:59+00:00",\n        "jobDefinition": {\n            "variables": {\n                "activitymap": {\n                    "action": "delete"\n                },\n                "prop12": {\n                    "action": "delete"\n                },\n                "evar74": {\n                    "action": "delete"\n                },\n                "evar107": {\n                    "action": "delete"\n                }\n            }\n        },\n        "jobId": "24",\n        "progress": 100,\n        "reportSuiteId": "sample.reportsuite",\n        "serverCalls": 2,\n        "status": "complete"\n    },\n    {\n        "dateRangeEnd": "2019-04-28",\n        "dateRangeStart": "2019-04-28",\n        "jobCompleteTime": null,\n        "jobCreateTime": "2020-04-24T09:02:59+00:00",\n        "jobDefinition": {\n            "variables": {\n                "prop82": {\n                    "action": "delete"\n                }\n            }\n        },\n        "jobId": "25",\n        "progress": 0,\n        "reportSuiteId": "sample.reportsuite",\n        "serverCalls": 2,\n        "status": "processing"\n    }\n]\n')))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-2-0-endpoints-data-repair-job-md-393bd1d444f347ae1afc.js.map